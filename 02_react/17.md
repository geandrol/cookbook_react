<h1>Projeto Blog Pessoal - Implementando o Cadastro</h1>

A página de cadastro de usuário em um aplicativo web é onde novos usuários se registram, preenchendo um formulário com informações como nome, e-mail e senha. Após o preenchimento, os dados são enviados para o servidor, onde são validados. Se tudo estiver correto, uma conta é criada, permitindo o acesso ao aplicativo. Uma página de registro bem projetada é crucial para uma experiência de usuário eficiente e segura, protegendo informações pessoais e garantindo uma entrada suave no aplicativo.

Então vamos implementar a lógica na página de cadastro para podemos criar novos usuários no nosso Back End, e depois logarmos com esses novos registros.

<h2><img src="https://i.imgur.com/izFuHID.png" title="source: imgur.com" width="4%"/>Passo 01 - Atualizar a Classe de Serviço - Service</h2>

1. Vamos começar adicionando a service de cadastro de usuários. Portanto, abra o arquivo **Service.ts** localizado dentro da pasta **service**.

<div align="center"><img src="https://i.imgur.com/mrj7l7F.png" title="source: imgur.com" /></div>



<div align="center"><img src="https://i.imgur.com/fzJ4GMI.png" title="source: imgur.com" /></div>

<br>

2. Abaixo da service de Login, adicione lógica a seguir:

```typescript
export const cadastrarUsuario = async(url: string, dados: Object, setDados: Function) => { 
  const resposta = await api.post(url,dados)
  setDados(resposta.data)
}
```

IMAGEM PRINT 66

**Vamos analisar o nosso código:**

**Linhas 12 a 15:** Construímos e exportamos a função assíncrona chamada **cadastrarUsuario**, que será responsável por cadastrar um novo usuário em nossa aplicação.

**Linha 12:** Essa Arrow function aceita três argumentos:

- **url:** É uma string que representa o endpoint da API para onde a solicitação POST será feita. Essa URL será anexada à URL base definida anteriormente na instância da Axios (api).
- **dados:** É um objeto que representa os dados que serão enviados na solicitação POST. Esses dados serão enviados no corpo da solicitação HTTP.
- **setDados:** É uma função que será usada para atualizar os dados na sua aplicação com a resposta da solicitação.

**Linha 13:** Esta linha faz uma solicitação POST para a URL especificada no parâmetro de mesmo nome usando a instância do Axios, **api**. Os dados a serem enviados estão contidos no objeto **dados**. A palavra reservada **await** é usada para esperar a conclusão da solicitação antes de continuarmos o fluxo da função.

**Linha 14:** Após a conclusão da solicitação, a resposta da API é armazenada na variável **resposta**. O código então chama a função **setDados**, passando **resposta.data como argumento**. Isso atualiza os dados na nossa aplicação com os dados retornados pela API após o login do usuário.

| [![source: imgur.com](https://camo.githubusercontent.com/656a7f920290b1249ff1f60c486fa6cb7ad1af445115fac67cf14a9abd41a208/68747470733a2f2f692e696d6775722e636f6d2f684f67577653632e706e67)](https://camo.githubusercontent.com/656a7f920290b1249ff1f60c486fa6cb7ad1af445115fac67cf14a9abd41a208/68747470733a2f2f692e696d6775722e636f6d2f684f67577653632e706e67) | **ATENÇÃO:** *Observe que o código da service Cadastrar Usuário é idêntico ao código da service de Login, mudando apenas o seu nome declarativo. Isso ocorre pois essas duas funções têm escopos e propósitos similares, mas fique atento, pois cada uma tem sua respectiva responsabilidade e não devem serem trocadas.* |
| ------------------------------------------------------------ | ------------------------------------------------------------ |



<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/>Passo 02 - Atualização do Componente Cadastrar Usuário</h2>

1. Abra o componente **Cadastro.tsx** localizado dentro da pasta **src**.
2. Insira os códigos abaixo, nos locais indicados:

```react
import { ChangeEvent, FormEvent, useEffect, useState } from 'react'
import { RotatingLines } from 'react-loader-spinner'
import { useNavigate } from 'react-router-dom'

import { cadastrarUsuario } from '../../services/Service'
import Usuario from '../../models/Usuario'

import './Cadastro.css'
```

```react
function Cadastro() {

    const navigate = useNavigate()

    const [isLoading, setIsLoading] = useState<boolean>(false)
    const [confirmaSenha, setConfirmaSenha] = useState<string>("")

    const [usuario, setUsuario] = useState<Usuario>({
        id: 0,
        nome: '',
        usuario: '',
        senha: '',
        foto: ''
    })

    const [usuarioResposta, setUsuarioResposta] = useState<Usuario>({
        id: 0,
        nome: '',
        usuario: '',
        senha: '',
        foto: ''
    })

    useEffect(() => {
        if (usuarioResposta.id !== 0) {
            back()
        }
    }, [usuarioResposta])

    function back() {
        navigate('/login')
    }

    function handleConfirmarSenha(e: ChangeEvent<HTMLInputElement>) {
        setConfirmaSenha(e.target.value)
    }

    function atualizarEstado(e: ChangeEvent<HTMLInputElement>) {
        setUsuario({
            ...usuario,
            [e.target.name]: e.target.value
        })
    }

    async function cadastrarNovoUsuario(e: FormEvent<HTMLFormElement>) {
        e.preventDefault()

        if (confirmaSenha === usuario.senha && usuario.senha.length >= 8) {
            setIsLoading(true)

            try {
                await cadastrarUsuario(`/usuarios/cadastrar`, usuario, setUsuarioResposta)
                alert('Usuário cadastrado com sucesso')
                setIsLoading(false)

            } catch (error) {
                alert('Erro ao cadastrar o Usuário')
                setIsLoading(false)
            }

        } else {
            alert('Dados inconsistentes. Verifique as informações de cadastro.')
            setUsuario({ ...usuario, senha: "" })
            setConfirmaSenha("")
            setIsLoading(false)
        }
    }
```

```react
<div className="grid grid-cols-1 lg:grid-cols-2 h-screen place-items-center font-bold">
	<div className="fundoCadastro hidden lg:block"></div>
	<form 
        className='flex justify-center items-center flex-col w-2/3 gap-3' 
        onSubmit={cadastrarNovoUsuario}>
		<h2 className='text-slate-900 text-5xl'>Cadastrar</h2>
		<div className="flex flex-col w-full">
         	<label htmlFor="nome">Nome</label>
            	<input
                	type="text"
                    id="nome"
                    name="nome"
                    placeholder="Nome"
                    className="border-2 border-slate-700 rounded p-2"
                    value={usuario.nome}
                    onChange={(e: ChangeEvent<HTMLInputElement>) => atualizarEstado(e)}
				/>
                    </div>
                    <div className="flex flex-col w-full">
                        <label htmlFor="usuario">Usuario</label>
                        <input
                            type="text"
                            id="usuario"
                            name="usuario"
                            placeholder="Usuario"
                            className="border-2 border-slate-700 rounded p-2"
                            value={usuario.usuario}
                            onChange={(e: ChangeEvent<HTMLInputElement>) => atualizarEstado(e)}
                        />
                    </div>
                    <div className="flex flex-col w-full">
                        <label htmlFor="foto">Foto</label>
                        <input
                            type="text"
                            id="foto"
                            name="foto"
                            placeholder="Foto"
                            className="border-2 border-slate-700 rounded p-2"
                            value={usuario.foto}
                            onChange={(e: ChangeEvent<HTMLInputElement>) => atualizarEstado(e)}
                        />
                    </div>
                    <div className="flex flex-col w-full">
                        <label htmlFor="senha">Senha</label>
                        <input
                            type="password"
                            id="senha"
                            name="senha"
                            placeholder="Senha"
                            className="border-2 border-slate-700 rounded p-2"
                            value={usuario.senha}
                            onChange={(e: ChangeEvent<HTMLInputElement>) => atualizarEstado(e)}
                        />
                    </div>
                    <div className="flex flex-col w-full">
                        <label htmlFor="confirmarSenha">Confirmar Senha</label>
                        <input
                            type="password"
                            id="confirmarSenha"
                            name="confirmarSenha"
                            placeholder="Confirmar Senha"
                            className="border-2 border-slate-700 rounded p-2"
                            value={confirmaSenha}
                            onChange={(e: ChangeEvent<HTMLInputElement>) => handleConfirmarSenha(e)}
                        />
                    </div>
                    <div className="flex justify-around w-full gap-8">
                        <button 
                           	className='rounded text-white bg-red-400 hover:bg-red-700 w-1/2 py-2'
                            onClick={back}>
                            	Cancelar
                        </button>
                        <button 
                            className='rounded text-white bg-indigo-400 hover:bg-indigo-900 w-1/2 
                                       py-2 flex justify-center' 
                            type='submit'>
                                {isLoading ? <RotatingLines
                                    strokeColor="white"
                                    strokeWidth="5"
                                    animationDuration="0.75"
                                    width="24"
                                    visible={true}
                                /> :
                                <span>Cadastrar</span>}
                        </button>
                    </div>
                </form>
            </div>
```

NÃO SE ESQUECER DE ARRUMAR A IMAGEM 

**Vamos analisar os códigos:**

**Linhas 01 a 06:** Fazemos as importações dos Componentes, Interfaces e Funções de suas respectivas bibliotecas e arquivos para dentro do Componente.

**Linha 12:** Criamos uma constante chamada **navigate** e indicamos que ela recebe o **hook useNavigate()**. Com isso, agora a variável **navigate consegue redirecionar a pessoa para outras rotas/componentes.**

**Linha 14:** Definimos um estado chamado **isLoading** com um valor inicial **false**. Este estado será usado para armazenar uma variável do tipo booleano, auxiliando no processo de confirmar se uma determinada ação foi finalizada (false) ou não (true). Junto a ele, temos sua função **setIsLoading** responsável por atualizar seu valor.

**Linha 15:** 

**Linhas 17 a 23:**

**Linhas 25 a 31:**





<br />


<div align="left"><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/> <a href="https://pt-br.react.dev/reference/react" target="_blank"><b>Documentação: Hooks</b></a></div>

<div align="left"><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/> <a href="https://pt-br.react.dev/reference/react/useState" target="_blank"><b>Documentação: Hook - useState</b></a></div>

<div align="left"><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/> <a href="https://pt-br.react.dev/reference/react/useEffect" target="_blank"><b>Documentação: Hook - useEffect</b></a></div>

<div align="left"><img src="https://i.imgur.com/ey5iP4N.png" title="source: imgur.com" width="4%"/> <a href="https://reactrouter.com/en/6.11.0/hooks/use-navigate" target="_blank"><b>Documentação do React Router - Hook - useNavigate</b></a></div>

<div align="left"><img src="https://i.imgur.com/ey5iP4N.png" title="source: imgur.com" width="4%"/> <a href="https://reactrouter.com/en/6.11.0/components/link" target="_blank"><b>Documentação do React Router - Link</b></a></div>

<div align="left"><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/> <a href="https://pt-br.react.dev/reference/react-dom/components#form-components" target="_blank"><b>Documentação: Forms</b></a></div>

<div align="left"><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/> <a href="https://pt-br.react.dev/reference/react-dom/components/input" target="_blank"><b>Documentação: Change Event</b></a></div>

<div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Operators/Spread_syntax" target="_blank"><b>Documentação: Spread Operator</b></a></div>

<div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank"><b>Documentação: Funções Assíncronas</b></a></div>

<div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank"><b>Documentação: Promise</b></a></div>

<div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/AsyncFunction" target="_blank"><b>Documentação: Async</b></a></div>

<div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Operators/await" target="_blank"><b>Documentação: Await</b></a></div>

<br />



<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="5%"/>Testar o Componente</h2>





<div align="center"><img src="https://i.imgur.com/jzV2eSF.png" title="source: imgur.com" /></div>



<div align="center"><img src="https://i.imgur.com/EM1w9Gw.png" title="source: imgur.com" /></div>



<div align="center"><img src="https://i.imgur.com/b8Kb25b.png" title="source: imgur.com" /></div>





<div align="center"><img src="https://i.imgur.com/kHQVE3D.png" title="source: imgur.com" /></div>



<div align="center"><img src="https://i.imgur.com/Fw1Escn.png" title="source: imgur.com" /></div>





<div align="center"><img src="https://i.imgur.com/4jgwcIw.png" title="source: imgur.com" /></div>





<div align="center"><img src="https://i.imgur.com/Wo6aFrp.png" title="source: imgur.com" /></div>



<div align="center"><img src="https://i.imgur.com/ll6LTOM.png" title="source: imgur.com" /></div>


