<h1>Projeto¬†Blog¬†Pessoal¬†-¬†Integra√ß√£o com a API - Model</h1>

<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="5%"/>Estrutura da Integra√ß√£o Back X Front</h2>

Dependendo da complexidade da aplica√ß√£o e das tecnologias que est√£o sendo usadas em sua constru√ß√£o, a **Integra√ß√£o / Consumo do Back com o Front pode ter estruturas diferentes**, mas apesar disso, podemos resumi-l√°s em 3 por tr√™s partes principais: **as Models, as Services e o Gerenciamento de Estado.**

* **Models:** s√£o modelos ou esquemas de dados que definem como os dados s√£o organizados e estruturados na aplica√ß√£o. Eles podem ser usados para validar e normalizar os dados antes de serem armazenados ou exibidos.
* **Services:** s√£o m√≥dulos ou arquivos que possuem funcionalidades espec√≠ficas da aplica√ß√£o, como o acesso a uma API, a manipula√ß√£o de dados, a autentica√ß√£o de usu√°rios, entre outros. Esses servi√ßos geralmente cont√™m m√©todos que realizam opera√ß√µes ass√≠ncronas, como a realiza√ß√£o de requisi√ß√µes HTTP, e retornam Promises com os resultados dessas opera√ß√µes.
* **Gerenciamento de Estado**: √© uma forma para manter o controle das informa√ß√µes importantes em seu aplicativo. O React possui um recurso de estado interno, mas no caso usaremos a Context API para gerenciar o estado globalmente.

<h2>üë£ Passo 01 - Criar a pasta Models</h2>

Antes de criarmos as nossas models, vamos criar a pasta **models**, para podermos armazen√°-las e manter uma organiza√ß√£o na nossa aplica√ß√£o.

1. Na pasta **src**, clique com o bot√£o direito do mouse e clique na op√ß√£o **New Folder** (Nova Pasta).
2. O nome da pasta ser√° **models**. Ap√≥s digitar o nome da pasta, pressione a tecla **enter** do seu teclado para concluir.
3. Ao concluir, voc√™ deve estar a seguinte estrutura dentro da pasta **src**:

<br>

<div align="center"><img src="https://i.imgur.com/IagV5y7.png" title="source: imgur.com" /></div>

<br>

<h2><img src="https://i.imgur.com/izFuHID.png" title="source: imgur.com" width="4%"/>Passo 02 - Criando a model de UsuarioLogin</h2>

1. Agora vamos criar a model UsuarioLogin, portanto, clique com o bot√£o direito do mouse sobre a pasta **models**, e clique na op√ß√£o **New File** (Novo Arquivo).
2. O nome do arquivo ser√° **UsuarioLogin.ts**. Ap√≥s digitar o nome do arquivo, pressione a tecla **enter** do seu teclado para concluir.

<br>

<div align="center"><img src="https://i.imgur.com/RAGt6Ma.png" title="source: imgur.com" /></div>

<br>

| ![source: imgur.com](https://i.imgur.com/hOgWvSc.png) | <div align="left"> **ATEN√á√ÉO:** *Diferentes dos Componentes do React, que possuem a extens√£o .TSX, todas as models do nosso projeto possuem a extens√£o .TS, j√° que dentro de suas estruturas teremos apenas a sintaxe do Typescript, sem qualquer c√≥digo HTML/CSS .*                                                                                                                                                      </div> |
| ----------------------------------------------------- | ------------------------------------------------------------ |

<br>

3. Agora basta adicionar o c√≥digo como mostra a figura abaixo:

```ts
export default interface UsuarioLogin {
    id: number;
    nome: string;
    usuario: string;
    foto: string;
    senha: string;
    token: string;
}
```

<br>

<div align="center"><img src="https://i.imgur.com/dl0enaD.png" title="source: imgur.com" /></div>

<br>

**Vamos analisar o c√≥digo:**

**Linha 01:** A declara√ß√£o **export default** indica que a interface **UsuarioLogin** √© a exporta√ß√£o padr√£o deste m√≥dulo arquivo. J√° o c√≥digo **interface UsuarioLogin** declara que estamos construindo uma interface do TypeScript, definindo um contrato com um objeto. **No contexto desse c√≥digo, a interface UsuarioLogin define quais propriedades um objeto deve ter para ser considerado um objeto do tipo UsuarioLogin.**

**Linhas 02 a 07:** Declaramos as propriedades da interface **UsuarioLogin** com suas respectivas tipagens.

<br>

<h2><img src="https://i.imgur.com/izFuHID.png" title="source: imgur.com" width="4%"/>Passo 02 - Criando a model de Tema</h2>

Muito bem ent√£o, agora vamos adicionar a nossa segunda model, a **Model Tema**. 

1. Para isso, seguindo os passos anteriores construa outro **arquivo com a extens√£o .TS** chamado **Tema** dentro da pasta **models**.
2. Em seguida, adicione os c√≥digos a seguir:

```ts
export default interface Tema {
    id: number;
    descricao: string;
}
```

<br>

<div align="center"><img src="https://i.imgur.com/DAMbvsQ.png" title="source: imgur.com" /></div>

<br>

**Vamos analisar o c√≥digo:**

**Linha 01:** A declara√ß√£o **export default** indica que a interface **Tema** √© a exporta√ß√£o padr√£o deste m√≥dulo arquivo. Atrav√©s da palavra reservada interface definindo um contrato com um objeto do tipo Tema, ou seja, **no contexto desse c√≥digo, a interface Tema define quais propriedades um objeto deve ter para ser considerado um objeto do tipo Tema.**

**Linhas 02 a 03:** Declaramos as propriedades da interface **Tema** com suas respectivas tipagens.

<br>

<h2><img src="https://i.imgur.com/izFuHID.png" title="source: imgur.com" width="4%"/>Passo 02 - Criando a model de Postagem</h2>

Vamos a pr√≥xima Model! 

1. Seguindo os passos anteriores, agora crie uma model chamada **Postagem** dentro da pasta models, com a seguinte estrutura:

```ts
import Tema from './Tema';
import Usuario from './Usuario';

export default interface Postagem {
  id: number;
  titulo: string;
  texto: string;
  data: string;
  tema: Tema | null;
  usuario: Usuario | null;
}
```

<br>

<div align="center"><img src="https://i.imgur.com/P2Lqtdg.png" title="source: imgur.com" /></div>

<br>

**Vamos analisar o c√≥digo:**

**Linhas 01 e 02:** Aqui importamos as models **Tema** e **Usuario**, pois seguindo a estrutura da nossa Model Postagem do Back End, as postagens possuem uma relacionamento com Tema e Usu√°rio, e seu respectivos objetos tamb√©m devem seguir esse formato. 

**Como ainda n√£o criamos a model Usu√°rio, o VsCode apontar√° um erro indicando que n√£o pode encontrar o arquivo. N√£o se preocupe, pois j√° iremos criar a Model de Usuario.** 

**Linha 04:** Aqui, come√ßa a defini√ß√£o da interface **Postagem**, onde o **export default** indica que esta √© a exporta√ß√£o padr√£o do arquivo, o que significa que podemos import√°-la em outros arquivos.

**Linhas 05 a 10:** Declaramos as propriedades da interface **Postagem** com suas respectivas tipagens.

**Linha 09:** Representa o tema da postagem, onde a tipagem **Tema** √© uma refer√™ncia √† model importada anteriormente. O s√≠mbolo de **pipe ( | )** indica que essa propriedade pode ter mais de uma tipagem, tendo um comportamento parecido com o **operador OU**. J√° a tipagem **null** indica que essa propriedade **pode ser nula**, ou seja, pode n√£o ter um tema associado.

**Linha 10:** Assim como a linha superior, essa linha representa o usu√°rio associado a essa postagem, onde esse campo recebe as propriedades da model **Usuario**, importada anteriormente. Aqui o **| null** indica que essa propriedade pode ser nula, ou seja, pode n√£o ter um usu√°rio associado a ela.

Para termos um entendimento melhor de como essas models est√£o sendo usadas, vamos dar uma olhada em um exemplo de objeto criado a partir da Model Postagem.

**Exemplo de Objeto da Model Postagem (n√£o adicionar):**

```json
{
	"id": 1,
	"titulo": "Consumo de API",
	"texto": "Nessa aula vamos integrar o Front com o Back",
	"data": "2023-09-21T15:53:47.658367",
	"tema": {
		"id": 1,
		"descricao": "React"
	},
	"usuario": {
		"id": 1,
		"nome": "Usu√°rio Admin",
		"usuario": "admin@gmail.com",
		"senha": "$2a$10$ADxrYEVaZtJSisNSccd7Vu4kjDvuOYqDehbFX7rcvxxtH9W63NzQC",
		"foto": "https://avatars.githubusercontent.com/u/62150036?v=4"
	}
}
```

<br>

<h2><img src="https://i.imgur.com/izFuHID.png" title="source: imgur.com" width="4%"/>Passo 02 - Criando a model de Usu√°rio</h2>

1. Continuando, vamos a √∫ltima model da aplica√ß√£o, **a model Usu√°rio**. Assim como fez anteriormente, adicione essa nova model em sua respectiva pasta, e adicione os seguintes c√≥digos:

```ts
import Postagem  from "./Postagem";

export default interface Usuario {
  id: number;
  nome: string;
  usuario: string;
  foto: string;
  senha: string;
  postagem?: Postagem | null;
}
```

<br>

<div align="center"><img src="https://i.imgur.com/2FHAf6g.png" title="source: imgur.com" /></div>

<br>

 **Vamos analisar o c√≥digo:**

**Linha 01:** Assim como no √∫ltimo arquivo, a model Usu√°rio necessita de outras models devido o relacionamentos das tabelas no Back-End, portanto fazemos a importa√ß√£o da model Postagem.

**Linha 03:** Aqui definimos a interface **Usuario**, onde o **export default** indica que esta √© a exporta√ß√£o padr√£o do arquivo, o que significa que podemos import√°-la em outros arquivos.

**Linhas 04 a 09:** Declaramos as propriedades da interface **Usuario** com suas respectivas tipagens, e de acordo com a respectiva model constru√≠da no Back.

**Linha 09:** Representa as postagens que possuem um relacionamento a esse usu√°rio, onde **Postagem** √© uma refer√™ncia √† model importada. O s√≠mbolo de **pipe ( | )** indica que essa propriedade pode ter mais de uma tipagem, tendo um comportamento parecido com o **operador OU**. J√° a tipagem **null** indica que essa propriedade **pode ser nula**, ou seja, pode n√£o ter um tema associado. Por fim, a **interroga√ß√£o ( ? )** ao lado do nome da propriedade indica que ela √© **opcional**, ou seja, quando construirmos um objeto com base nessa model, esse campo pode ser omitido - usado quando estamos construindo um novo usu√°rio, e **quando ele n√£o √© omitido, ele pode ter a tipagem de um Objeto da Model Postagem, ou ser nulo.**

Para termos uma melhor vis√£o de como um objeto pode ser criado a partir dessa model, vamos dar uma olhada em alguns exemplos:

**Exemplo de Objeto da Model Usu√°rio sem a propriedade Postagem (n√£o adicionar):**

```ts
const usuario: Usuario = {
    id: 0,
    nome: 'Admin',
    usuario: 'admin@gmail.com',
    senha: '$2a$10$ADxrYEVaZtJSisNSccd7Vu4kjDvuOYqDehbFX7rcvxxtH9W63NzQC',
    foto: 'https://avatars.githubusercontent.com/u/62150036?v=4'
}
```

<br>

**Exemplo de Objeto da Model Usu√°rio com a propriedade Postagem nula (n√£o adicionar):**

```ts
const usuario: Usuario = {
    id: 0,
    nome: 'Admin',
    usuario: 'admin@gmail.com',
    senha: '$2a$10$ADxrYEVaZtJSisNSccd7Vu4kjDvuOYqDehbFX7rcvxxtH9W63NzQC',
    foto: 'https://avatars.githubusercontent.com/u/62150036?v=4',
    postagem: null
}
```

<br>

**Exemplo de Objeto da Model Usu√°rio sem a propriedade Postagem preenchida (n√£o adicionar):**

```ts
const usuario: Usuario = {
    id: 0,
    nome: 'Admin',
    usuario: 'admin@gmail.com',
    senha: '$2a$10$ADxrYEVaZtJSisNSccd7Vu4kjDvuOYqDehbFX7rcvxxtH9W63NzQC',
    foto: 'https://avatars.githubusercontent.com/u/62150036?v=4',
    postagem: {
        "id": 1,
        "titulo": "Consumo de API",
        "texto": "Nessa aula vamos integrar o Front com o Back",
        "data": "2023-09-21T15:53:47.658367",
        "tema": {
            "id": 1,
            "descricao": "React"
        },
        "usuario": {
            "id": 1,
            "nome": "Usu√°rio Admin",
            "usuario": "admin@gmail.com",
            "senha": "$2a$10$ADxrYEVaZtJSisNSccd7Vu4kjDvuOYqDehbFX7rcvxxtH9W63NzQC",
            "foto": "https://avatars.githubusercontent.com/u/62150036?v=4"
        }
    }
}
```

<br>

| ![source: imgur.com](https://i.imgur.com/hOgWvSc.png) | <div align="left"> **ATEN√á√ÉO:** *Voc√™ pode ter notado que os campos e tipagens das Models criadas aqui s√£o id√™nticas aos campos e tipagens das Models constru√≠das no Back-End. Isso se d√° pois para que os objetos recebidos ao Back e enviados ao Front possam ser processados corretamente, eles precisam ter a mesma estrutura. Estrutura essa que s√£o validadas atrav√©s das Models.* </div> |
| ----------------------------------------------------- | ------------------------------------------------------------ |

<br />

Ao final, voc√™ deve ter uma estrutura id√™ntica a imagem abaixo:

<br>

<div align="center"><img src="https://i.imgur.com/1E0rJaL.png" title="source: imgur.com" /></div>

<br />

<div align="left"><img src="https://i.imgur.com/izFuHID.png" title="source: imgur.com" width="3%"/> <a href="https://www.typescriptlang.org/docs/handbook/modules.html#default-exports" target="_blank"><b>TypeScript - Default Export</b></a></div>

<div align="left"><img src="https://i.imgur.com/izFuHID.png" title="source: imgur.com" width="3%"/> <a href="https://www.typescriptlang.org/docs/handbook/typescript-tooling-in-5-minutes.html#interfaces" target="_blank"><b>TypeScript - Interface</b></a></div>

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="5%"/> <a href="https://github.com/Yuri-stack/BlogPessoalReact_Fonte/tree/14_Construindo_Models" target="_blank"><b>C√≥digo fonte do projeto</b></a></div>

<br /><br />
	
<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>
